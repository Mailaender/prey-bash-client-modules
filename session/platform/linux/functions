#!/bin/bash
####################################################################
# Prey Session Module Linux Functions - by Tomas Pollak (bootlog.org)
# URL: http://preyproject.com
# License: GPLv3
####################################################################

get_screenshot() {

	local xwd=`which xwd` # standard xorg tool
	local scrot=`which scrot` # scrot is lighter
	local import=`which import` # imagemagick

	if [ -n "$xwd" ]; then
 
		/usr/bin/xwd -display :0 -root | convert - $session__screenshot 

	elif [ -n "$scrot" ]; then

		run_as_current_user "$scrot $session__screenshot"

	elif [ -n "$import" ]; then

		local args="-window root -display :0"
		run_as_current_user "$import $args $session__screenshot"

	fi
}
